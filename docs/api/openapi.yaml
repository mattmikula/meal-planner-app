openapi: 3.1.0
info:
  title: Meal Planner API
  version: "0.1.0"
  description: |-
    API surface for the Meal Planner app. This spec documents current endpoints
    and leaves placeholders for planned routes.
servers:
  - url: http://localhost:3000
    description: Local development

tags:
  - name: Health
    description: Service health checks
  - name: Auth
    description: Authentication-related endpoints
  - name: Household
    description: Household sharing and invites
  - name: Audit
    description: Household audit trail
  - name: Meals
    description: Meal management endpoints
  - name: Groceries
    description: Household grocery list endpoints

paths:
  /api/health:
    get:
      summary: Health check
      description: Confirms the API can reach the database.
      tags:
        - Health
      responses:
        "200":
          description: Database reachable.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthOk"
              examples:
                ok:
                  summary: Healthy response
                  value:
                    ok: true
        "500":
          description: Database error.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthError"
              examples:
                dbError:
                  summary: Database error
                  value:
                    ok: false
                    error: Database error

  /api/me:
    get:
      summary: Get current user
      description: |-
        Returns the authenticated user. Accepts a Bearer token in the
        Authorization header, or refresh cookies set by the web auth flow.
      tags:
        - Auth
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Authenticated user.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                user:
                  summary: Authenticated user
                  value:
                    id: 3e0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                    email: ada@example.com
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                unauthorized:
                  summary: Unauthorized
                  value:
                    error: Unauthorized

  /api/household:
    get:
      summary: Get household context
      description: Returns the current household and membership for the user. If no current household is set, the earliest active membership is used.
      tags:
        - Household
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Household context.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HouseholdContext"
              examples:
                household:
                  summary: Household context
                  value:
                    id: 5f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                    name: Home
                    role: owner
                    status: active
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Household lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/household/members:
    get:
      summary: List household members
      description: Returns all members for the current household.
      tags:
        - Household
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Household members.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HouseholdMembersResponse"
              examples:
                members:
                  summary: Household members
                  value:
                    members:
                      - id: 3e0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                        userId: 2b0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                        role: owner
                        status: active
                        createdAt: "2024-02-12T10:00:00Z"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Member lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/household/invites:
    post:
      summary: Create household invite
      description: Creates an invite and returns a shareable invite link.
      tags:
        - Household
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/HouseholdInviteRequest"
            examples:
              invite:
                summary: Invite request
                value:
                  email: ada@example.com
      responses:
        "200":
          description: Invite created.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HouseholdInviteResponse"
              examples:
                invite:
                  summary: Invite response
                  value:
                    inviteId: 6e0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                    inviteUrl: https://mealplanner.app/invite?invite_token=token-value
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Invite creation failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/household/invites/accept:
    post:
      summary: Accept household invite
      description: Accepts an invite token and joins the household.
      tags:
        - Household
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/HouseholdInviteAcceptRequest"
            examples:
              accept:
                summary: Accept invite request
                value:
                  token: invite-token
      responses:
        "200":
          description: Invite accepted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HouseholdInviteAcceptResponse"
              examples:
                accepted:
                  summary: Accept response
                  value:
                    householdId: 5f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                    memberId: 6e0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
        "400":
          description: Invalid or expired invite.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "403":
          description: Invite email mismatch.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "409":
          description: Invite already used or member exists in this household.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Invite acceptance failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/audit:
    get:
      summary: List audit events
      description: Returns audit events for the household.
      tags:
        - Audit
      security:
        - bearerAuth: []
      parameters:
        - name: entity
          in: query
          description: Filter by entity type.
          required: false
          schema:
            type: string
            enum: [meal, plan, plan_day]
        - name: limit
          in: query
          description: Limit the number of events (max 100).
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: Audit events.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuditResponse"
              examples:
                events:
                  summary: Audit events
                  value:
                    items:
                      - id: 7f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                        entityType: meal
                        entityId: 8f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                        action: meal.updated
                        actorUserId: 9f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                        createdAt: "2024-02-12T10:00:00Z"
                        summary:
                          mealId: 8f0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                          name: Pasta
        "400":
          description: Invalid filters.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Audit lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/meals:
    get:
      summary: List meals
      description: Returns all meals for the current household.
      tags:
        - Meals
      security:
        - bearerAuth: []
      responses:
        "200":
          description: List of meals.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MealsResponse"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Meals lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create meal
      description: Creates a new meal for the current household.
      tags:
        - Meals
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMealRequest"
      responses:
        "200":
          description: Meal created.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Meal"
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Meal creation failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/verify-otp:
    post:
      summary: Verify email OTP
      description: Verify a one-time passcode and set auth cookies.
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/VerifyOtpRequest"
            examples:
              verify:
                summary: Verify OTP request
                value:
                  email: ada@example.com
                  token: "123456"
      responses:
        "200":
          description: Verified user.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
              examples:
                user:
                  summary: Authenticated user
                  value:
                    id: 3e0f3d65-2d7a-4f60-9d5c-6df2b6fbe5e8
                    email: ada@example.com
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                invalid:
                  summary: Missing fields
                  value:
                    error: Email and code are required.
        "401":
          description: Invalid or expired code.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
              examples:
                invalidCode:
                  summary: Invalid code
                  value:
                    error: Invalid or expired code.

  /api/logout:
    post:
      summary: Log out
      description: Clear authentication cookies.
      tags:
        - Auth
      responses:
        "200":
          description: Signed out.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LogoutOk"
              examples:
                ok:
                  summary: Signed out
                  value:
                    ok: true

  /api/meals/{id}:
    patch:
      summary: Update meal
      description: Updates an existing meal.
      tags:
        - Meals
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: Meal ID
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMealRequest"
      responses:
        "200":
          description: Meal updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Meal"
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Meal not found.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Meal update failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete meal
      description: Deletes an existing meal.
      tags:
        - Meals
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: Meal ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Meal deleted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteMealResponse"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Meal not found.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Meal deletion failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/groceries:
    get:
      summary: List grocery items
      description: Returns all grocery items for the current household.
      tags:
        - Groceries
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Grocery items.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroceryItemsResponse"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Grocery lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create grocery item
      description: Creates a grocery item for the current household.
      tags:
        - Groceries
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateGroceryItemRequest"
      responses:
        "200":
          description: Grocery item created.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroceryItem"
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Grocery item creation failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/groceries/{id}:
    patch:
      summary: Update grocery item
      description: Updates an existing grocery item.
      tags:
        - Groceries
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: Grocery item ID
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateGroceryItemRequest"
      responses:
        "200":
          description: Grocery item updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GroceryItem"
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Grocery item not found.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Grocery item update failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      summary: Delete grocery item
      description: Deletes a grocery item.
      tags:
        - Groceries
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: Grocery item ID
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Grocery item deleted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteGroceryItemResponse"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Grocery item not found.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Grocery item deletion failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/plans:
    get:
      summary: Fetch weekly plan
      description: Returns a weekly plan for the household, creating it if missing.
      tags:
        - Plans
      security:
        - bearerAuth: []
      parameters:
        - name: weekStart
          in: query
          description: Week start date (Monday) in YYYY-MM-DD format.
          required: true
          schema:
            $ref: "#/components/schemas/PlanWeekStart"
      responses:
        "200":
          description: Weekly plan.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Plan"
        "400":
          description: Invalid request.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Plan lookup failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/plans/days/{id}:
    patch:
      summary: Update plan day
      description: Updates a plan day's meal assignment or lock status.
      tags:
        - Plans
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: Plan day ID
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePlanDayRequest"
      responses:
        "200":
          description: Plan day updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PlanDay"
        "400":
          description: Invalid request body.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "404":
          description: Plan day not found.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Plan day update failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  /api/plans/generate:
    post:
      summary: Generate weekly plan
      description: Fills unlocked days in a weekly plan from the household meal pool.
      tags:
        - Plans
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PlanGenerateRequest"
      responses:
        "200":
          description: Generated weekly plan.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Plan"
        "400":
          description: Invalid request or unable to generate plan.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "401":
          description: Missing or invalid credentials.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        "500":
          description: Plan generation failed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    HealthOk:
      type: object
      required:
        - ok
      properties:
        ok:
          type: boolean
          const: true

    HealthError:
      type: object
      required:
        - ok
        - error
      properties:
        ok:
          type: boolean
          const: false
        error:
          type: string

    User:
      type: object
      required:
        - id
        - email
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email

    VerifyOtpRequest:
      type: object
      required:
        - email
        - token
      properties:
        email:
          type: string
          format: email
        token:
          type: string

    LogoutOk:
      type: object
      required:
        - ok
      properties:
        ok:
          type: boolean
          const: true

    Error:
      type: object
      required:
        - error
      properties:
        error:
          type: string

    HouseholdContext:
      type: object
      required:
        - id
        - name
        - role
        - status
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          nullable: true
        role:
          type: string
          enum: [owner, member]
        status:
          type: string
          enum: [active, inactive]

    HouseholdMember:
      type: object
      required:
        - id
        - userId
        - role
        - status
        - createdAt
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        role:
          type: string
          enum: [owner, member]
        status:
          type: string
          enum: [active, inactive]
        createdAt:
          type: string
          format: date-time

    HouseholdMembersResponse:
      type: object
      required:
        - members
      properties:
        members:
          type: array
          items:
            $ref: "#/components/schemas/HouseholdMember"

    HouseholdInviteRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email

    HouseholdInviteResponse:
      type: object
      required:
        - inviteId
        - inviteUrl
      properties:
        inviteId:
          type: string
          format: uuid
        inviteUrl:
          type: string
          format: uri

    HouseholdInviteAcceptRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string

    HouseholdInviteAcceptResponse:
      type: object
      required:
        - householdId
        - memberId
      properties:
        householdId:
          type: string
          format: uuid
        memberId:
          type: string
          format: uuid

    AuditEvent:
      type: object
      required:
        - id
        - entityType
        - entityId
        - action
        - actorUserId
        - createdAt
        - summary
      properties:
        id:
          type: string
          format: uuid
        entityType:
          type: string
          enum: [meal, plan, plan_day]
        entityId:
          type: string
          format: uuid
        action:
          type: string
        actorUserId:
          type: string
          format: uuid
          nullable: true
        createdAt:
          type: string
          format: date-time
        summary:
          type: object

    AuditResponse:
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/AuditEvent"

    Meal:
      type: object
      required:
        - id
        - name
        - createdAt
        - createdBy
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        notes:
          type: string
          nullable: true
        imageUrl:
          type: string
          format: uri
          nullable: true
        createdAt:
          type: string
          format: date-time
        createdBy:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
          nullable: true
        updatedBy:
          type: string
          format: uuid
          nullable: true

    MealsResponse:
      type: object
      required:
        - meals
      properties:
        meals:
          type: array
          items:
            $ref: "#/components/schemas/Meal"

    GroceryItem:
      type: object
      required:
        - id
        - name
        - checked
        - createdAt
        - createdBy
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        quantity:
          type: string
          nullable: true
        checked:
          type: boolean
        createdAt:
          type: string
          format: date-time
        createdBy:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
          nullable: true
        updatedBy:
          type: string
          format: uuid
          nullable: true

    GroceryItemsResponse:
      type: object
      required:
        - items
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/GroceryItem"

    CreateGroceryItemRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        quantity:
          type: string
          maxLength: 100
        checked:
          type: boolean

    UpdateGroceryItemRequest:
      type: object
      description: At least one field (name, quantity, or checked) must be provided.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        quantity:
          type: string
          maxLength: 100
          nullable: true
        checked:
          type: boolean

    DeleteGroceryItemResponse:
      type: object
      required:
        - ok
      properties:
        ok:
          type: boolean
          const: true

    PlanWeekStart:
      type: string
      format: date
      pattern: "^\\d{4}-\\d{2}-\\d{2}$"
      example: "2024-02-12"

    PlanGenerateRequest:
      type: object
      required:
        - weekStart
      properties:
        weekStart:
          $ref: "#/components/schemas/PlanWeekStart"

    UpdatePlanDayRequest:
      type: object
      description: At least one field (mealId, locked, or leftoverFromPlanDayId) must be provided.
      properties:
        mealId:
          type: string
          format: uuid
          nullable: true
        locked:
          type: boolean
        leftoverFromPlanDayId:
          type: string
          format: uuid
          nullable: true

    PlanDay:
      type: object
      required:
        - id
        - planId
        - date
        - locked
        - createdAt
        - createdBy
      properties:
        id:
          type: string
          format: uuid
        planId:
          type: string
          format: uuid
        date:
          type: string
          format: date
        mealId:
          type: string
          format: uuid
          nullable: true
        leftoverFromPlanDayId:
          type: string
          format: uuid
          nullable: true
        locked:
          type: boolean
        createdAt:
          type: string
          format: date-time
        createdBy:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
          nullable: true
        updatedBy:
          type: string
          format: uuid
          nullable: true

    Plan:
      type: object
      required:
        - id
        - weekStart
        - createdAt
        - createdBy
        - days
      properties:
        id:
          type: string
          format: uuid
        weekStart:
          $ref: "#/components/schemas/PlanWeekStart"
        createdAt:
          type: string
          format: date-time
        createdBy:
          type: string
          format: uuid
        updatedAt:
          type: string
          format: date-time
          nullable: true
        updatedBy:
          type: string
          format: uuid
          nullable: true
        days:
          type: array
          items:
            $ref: "#/components/schemas/PlanDay"

    CreateMealRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        notes:
          type: string
          maxLength: 1000
        imageUrl:
          type: string
          format: uri

    UpdateMealRequest:
      type: object
      description: At least one field (name or notes) must be provided.
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        notes:
          type: string
          maxLength: 1000
        imageUrl:
          type: string
          format: uri
          nullable: true

    DeleteMealResponse:
      type: object
      required:
        - ok
      properties:
        ok:
          type: boolean
          const: true
